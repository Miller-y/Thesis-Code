%% 仿真 生成LED随机坐标和对应的像点
%% ccd 内参
K = [3942.30967992024, 0, 1500
    0,0,0
    0,0,1];

%% ccd 相对位置
rc21 = rotz(120);
t21 = [-75,25*sqrt(3),0]';
rc31 = rotz(-120);
t31 = [-75,-25*sqrt(3),0]';
% t31 = [-75,-75,0]';

%% 外参
% R = rotz(23)*rotx(45);
% T = [200,3000,1200]';
R = [0000000.5 -0.866025 000000000
00.866025 0000000.5 000000000
000000000 000000000 000000001]';
T = -R*[0, 0, -1000]';
%% 生成LED随机坐标 
% leds = [0,0,0;
%     -62.3663142763152,54.8834019966364,31.5281211934319;
%     -115.723226642047,111.806151742535,40.5221711936069;
%     -169.876882090917,162.343106209608,-13.3935533392008;
%     83.4657839352860,96.6992501513420,-92.7289579613207;
%     15.4650588717596,156.887807819823,3.11465690638712;
%     -45.5560374625922,200.467033090431,19.5007693034646;
%     -108.525476460574,251.218907855537,-56.6383788764478;
%     150.796903225415,161.202176976412,-146.294364830958;
%     81.1241909502130,237.603895137824,-48.4381610873189;
%     30.8671621734287,293.223440087602,-52.0499750440352;
%     -43.0231936639100,350.286323743045,82.5622116022026;
%     222.950999567597,245.219238847882,79.0861396611380;
%     150.983025494642,316.813653790591,67.3738330154946;
%     81.9423221140162,365.929270225159,-110.183878788626;
%     43.0542752753858,414.870146852482,69.6211780969915;
%     10,10,10;
%     -52.3663142763152,64.8834019966364,41.5281211934319;
%     -105.723226642047,121.806151742535,50.5221711936069;
%     -159.876882090917,172.343106209608,-3.39355333920080;
%     93.4657839352860,106.699250151342,-82.7289579613207;
%     25.4650588717596,166.887807819823,13.1146569063871;
%     -35.5560374625922,210.467033090431,29.5007693034646;
%     -98.5254764605740,261.218907855537,-46.6383788764478;
%     160.796903225415,171.202176976412,-136.294364830958;
%     91.1241909502130,247.603895137824,-38.4381610873189;
%     40.8671621734287,303.223440087602,-42.0499750440352;
%     -33.0231936639100,360.286323743045,92.5622116022026;
%     232.950999567597,255.219238847882,89.0861396611380;
%     160.983025494642,326.813653790591,77.3738330154946;
%     91.9423221140162,375.929270225159,-100.183878788626;
%     53.0542752753858,424.870146852482,79.6211780969915]';
% 
led_num = 10;
leds = [1000*(rand(1,led_num) - 0.5);
    1000*(rand(1,led_num) - 0.5);
    1000*(rand(1,led_num)- 0.5);];


%% 对应的像点
Bias = [];
noise = 0;
bias= K*(R*leds+T);
bias = bias./bias(3,:);
Bias(1,:) = bias(1,:) +noise*(rand(1,length(leds))-0.5);

bias= K*(rc21*(R*leds+T)+t21);
bias = bias./bias(3,:);
Bias(2,:) = bias(1,:)+noise*(rand(1,length(leds))-0.5);

bias= K*(rc31*(R*leds+T)+t31);
bias = bias./bias(3,:);
Bias(3,:) = bias(1,:)+noise*(rand(1,length(leds))-0.5);



